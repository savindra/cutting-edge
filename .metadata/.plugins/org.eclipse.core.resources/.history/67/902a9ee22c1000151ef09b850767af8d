package lk.ac.iit.humzearch;

import lk.ac.iit.humzearch.app.AppController;

import com.android.volley.toolbox.ImageLoader;
import com.android.volley.toolbox.NetworkImageView;

import android.app.Dialog;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.PersistableBundle;
import android.support.v7.app.ActionBarActivity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.SeekBar;
import android.widget.TextView;

public class TuneResultActivity extends ActionBarActivity {
	
	private TextView txtTitle, txtArtist, txtAlbum, txtCountry, txtPlayPreview;
	private NetworkImageView imgArtwork;
	private final String DEFAULT_ARTWORK = "http://i.imgur.com/ST7k1qw.jpg";
	ImageLoader imageLoader = AppController.getInstance().getImageLoader();
	private Dialog previewDialog;
	
	private MediaPlayer mMediaplayer;
	private Button btnPlay,btnStop;
	private SeekBar seekBar;
	private TextView txtTimer;

	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.record_tune_result);
		
		txtTitle = (TextView) findViewById(R.id.txtTuneResultName);
		txtArtist = (TextView) findViewById(R.id.txtTuneResultArtist);
		txtAlbum = (TextView) findViewById(R.id.txtTuneResultAlbum);
		txtCountry = (TextView) findViewById(R.id.txtTuneResultCountry);
		imgArtwork = (NetworkImageView) findViewById(R.id.imgTuneResultCover);
		txtPlayPreview = (TextView) findViewById(R.id.txtRecordTuneResultPlayPreview);
		
		filData();
		initializePreviewDialog();
	}

	public void filData(){
		Bundle extras = getIntent().getExtras();
		if( extras != null ){
			
			String imgUrl = extras.getString("tune_img");
			if(imgUrl.equals("")){
				imgArtwork.setImageUrl(DEFAULT_ARTWORK, imageLoader);
			}else {
				imgArtwork.setImageUrl(extras.getString("tune_img"), imageLoader);
			}
			
			txtTitle.setText(extras.getString("tune_title"));
			txtArtist.setText(extras.getString("tune_artist"));
			txtAlbum.setText(extras.getString("tune_album"));
			txtCountry.setText(extras.getString("tune_country"));
			
			String url = extras.getString("tune_url");
			txtPlayPreview.setOnClickListener(new OnClickListener() {
				
				@Override
				public void onClick(View v) {
					
					
				}
			});
			
		}
		
	}
	
	private void initializePreviewDialog() {
		previewDialog = new Dialog(this);
		previewDialog.setContentView(R.layout.record_tune_result_play);
		previewDialog.setTitle("Preview");
		
		txtTimer = (TextView) previewDialog.findViewById(R.id.txtRecordTuneResultTimer);
		seekBar = (SeekBar) previewDialog.findViewById(R.id.recordTuneResultSeekBar);
		btnPlay = (Button) previewDialog.findViewById(R.id.btnRecordTuneResultPlay);
		btnStop = (Button) previewDialog.findViewById(R.id.btnRecordTuneResultStop);
		
		try{
			
		}
		
		
	}
	

}
